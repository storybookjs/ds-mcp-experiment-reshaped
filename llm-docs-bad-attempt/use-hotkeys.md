# useHotkeys Hook

## Overview
The useHotkeys hook manages keyboard shortcuts and hotkey detection throughout the application, providing a centralized way to handle complex key combinations with proper event handling and conflict resolution.

## Key Features
- Complex key combination detection
- Multiple modifier key support
- Hotkey conflict resolution
- Context-aware shortcuts
- Customizable key mappings
- Cross-platform compatibility

## Hook Interface
```typescript
type HotkeyConfig = {\n  key: string;\n  modifiers?: {\n    ctrl?: boolean;\n    shift?: boolean;\n    alt?: boolean;\n    meta?: boolean;\n  };\n  preventDefault?: boolean;\n  stopPropagation?: boolean;\n  enabled?: boolean;\n  context?: string;\n};\n\nfunction useHotkeys(\n  hotkeys: Array<{\n    config: HotkeyConfig;\n    handler: (event: KeyboardEvent) => void;\n  }>\n): {\n  registerHotkey: (config: HotkeyConfig, handler: (event: KeyboardEvent) => void) => void;\n  unregisterHotkey: (config: HotkeyConfig) => void;\n  enableContext: (context: string) => void;\n  disableContext: (context: string) => void;\n};\n```\n\n## Usage Examples\n\n### Basic Hotkey Registration\n```typescript\nimport { useHotkeys, Text, View, Card, Button } from 'reshaped';\nimport { useState } from 'react';\n\nfunction BasicHotkeys() {\n  const [lastPressed, setLastPressed] = useState<string>('');\n  const [counter, setCounter] = useState(0);\n  const [saved, setSaved] = useState(false);\n  \n  useHotkeys([\n    {\n      config: { key: 's', modifiers: { ctrl: true } },\n      handler: (event) => {\n        setLastPressed('Ctrl+S (Save)');\n        setSaved(true);\n        setTimeout(() => setSaved(false), 2000);\n      }\n    },\n    {\n      config: { key: 'k', modifiers: { ctrl: true, shift: true } },\n      handler: () => {\n        setLastPressed('Ctrl+Shift+K (Command Palette)');\n      }\n    },\n    {\n      config: { key: 'ArrowUp', modifiers: { ctrl: true } },\n      handler: () => {\n        setCounter(prev => prev + 1);\n        setLastPressed('Ctrl+↑ (Increment)');\n      }\n    },\n    {\n      config: { key: 'ArrowDown', modifiers: { ctrl: true } },\n      handler: () => {\n        setCounter(prev => Math.max(0, prev - 1));\n        setLastPressed('Ctrl+↓ (Decrement)');\n      }\n    },\n    {\n      config: { key: 'r', modifiers: { ctrl: true, shift: true } },\n      handler: () => {\n        setCounter(0);\n        setLastPressed('Ctrl+Shift+R (Reset)');\n      }\n    }\n  ]);\n  \n  return (\n    <Card padding={6}>\n      <View gap={4}>\n        <Text variant=\"title-5\">Hotkey Demo</Text>\n        \n        <View gap={3}>\n          <Text variant=\"body-2\">\n            Counter: <Text as=\"span\" weight=\"bold\">{counter}</Text>\n          </Text>\n          \n          {saved && (\n            <Text variant=\"body-3\" color=\"positive\">\n              ✓ Saved!\n            </Text>\n          )}\n          \n          <Text variant=\"body-3\" color=\"neutral-faded\">\n            Last pressed: {lastPressed || 'None'}\n          </Text>\n        </View>\n        \n        <View gap={2}>\n          <Text variant=\"title-6\">Available Shortcuts:</Text>\n          <Text variant=\"body-3\">• Ctrl+S - Save</Text>\n          <Text variant=\"body-3\">• Ctrl+Shift+K - Command Palette</Text>\n          <Text variant=\"body-3\">• Ctrl+↑ - Increment counter</Text>\n          <Text variant=\"body-3\">• Ctrl+↓ - Decrement counter</Text>\n          <Text variant=\"body-3\">• Ctrl+Shift+R - Reset counter</Text>\n        </View>\n      </View>\n    </Card>\n  );\n}\n```\n\n### Context-Aware Hotkeys\n```typescript\nimport { useHotkeys, Text, View, Card, Button, TextArea } from 'reshaped';\nimport { useState } from 'react';\n\nfunction ContextAwareHotkeys() {\n  const [activeContext, setActiveContext] = useState<'global' | 'editor' | 'modal'>('global');\n  const [editorContent, setEditorContent] = useState('');\n  const [modalOpen, setModalOpen] = useState(false);\n  const [logs, setLogs] = useState<string[]>([]);\n  \n  const addLog = (message: string) => {\n    const timestamp = new Date().toLocaleTimeString();\n    setLogs(prev => [...prev.slice(-4), `${timestamp}: ${message}`]);\n  };\n  \n  useHotkeys([\n    // Global hotkeys (always active)\n    {\n      config: { key: 'k', modifiers: { ctrl: true }, context: 'global' },\n      handler: () => addLog('Global: Command palette opened')\n    },\n    {\n      config: { key: 'n', modifiers: { ctrl: true }, context: 'global' },\n      handler: () => addLog('Global: New document created')\n    },\n    \n    // Editor context hotkeys\n    {\n      config: { key: 's', modifiers: { ctrl: true }, context: 'editor' },\n      handler: () => {\n        addLog('Editor: Document saved');\n        // Simulate save\n      }\n    },\n    {\n      config: { key: 'z', modifiers: { ctrl: true }, context: 'editor' },\n      handler: () => {\n        addLog('Editor: Undo');\n        setEditorContent(prev => prev.slice(0, -1));\n      }\n    },\n    {\n      config: { key: 'f', modifiers: { ctrl: true }, context: 'editor' },\n      handler: () => addLog('Editor: Find dialog opened')\n    },\n    \n    // Modal context hotkeys\n    {\n      config: { key: 'Escape', context: 'modal' },\n      handler: () => {\n        addLog('Modal: Closed with Escape');\n        setModalOpen(false);\n        setActiveContext('global');\n      }\n    },\n    {\n      config: { key: 'Enter', modifiers: { ctrl: true }, context: 'modal' },\n      handler: () => {\n        addLog('Modal: Confirmed with Ctrl+Enter');\n        setModalOpen(false);\n        setActiveContext('global');\n      }\n    }\n  ]);\n  \n  const { enableContext, disableContext } = useHotkeys([]);\n  \n  const switchContext = (newContext: 'global' | 'editor' | 'modal') => {\n    // Disable current context\n    if (activeContext !== 'global') {\n      disableContext(activeContext);\n    }\n    \n    // Enable new context\n    if (newContext !== 'global') {\n      enableContext(newContext);\n    }\n    \n    setActiveContext(newContext);\n    addLog(`Context switched to: ${newContext}`);\n  };\n  \n  const openModal = () => {\n    setModalOpen(true);\n    switchContext('modal');\n  };\n  \n  const closeModal = () => {\n    setModalOpen(false);\n    switchContext('global');\n  };\n  \n  return (\n    <View gap={4}>\n      <Card padding={6}>\n        <View gap={4}>\n          <View direction=\"row\" justify=\"space-between\" align=\"center\">\n            <Text variant=\"title-5\">Context-Aware Hotkeys</Text>\n            <Text variant=\"body-3\" color=\"primary\">\n              Active: {activeContext}\n            </Text>\n          </View>\n          \n          <View direction=\"row\" gap={2}>\n            <Button \n              size=\"small\"\n              variant={activeContext === 'global' ? 'solid' : 'outline'}\n              onClick={() => switchContext('global')}\n            >\n              Global\n            </Button>\n            <Button \n              size=\"small\"\n              variant={activeContext === 'editor' ? 'solid' : 'outline'}\n              onClick={() => switchContext('editor')}\n            >\n              Editor\n            </Button>\n            <Button \n              size=\"small\"\n              onClick={openModal}\n            >\n              Open Modal\n            </Button>\n          </View>\n          \n          {activeContext === 'editor' && (\n            <View gap={3}>\n              <Text variant=\"title-6\">Editor Mode</Text>\n              <TextArea\n                value={editorContent}\n                onChange={setEditorContent}\n                placeholder=\"Type here... Use Ctrl+Z to undo, Ctrl+S to save\"\n                rows={4}\n              />\n              <Text variant=\"body-3\" color=\"neutral-faded\">\n                Editor hotkeys: Ctrl+S (save), Ctrl+Z (undo), Ctrl+F (find)\n              </Text>\n            </View>\n          )}\n          \n          {activeContext === 'global' && (\n            <View gap={2}>\n              <Text variant=\"title-6\">Global Mode</Text>\n              <Text variant=\"body-3\" color=\"neutral-faded\">\n                Global hotkeys: Ctrl+K (command palette), Ctrl+N (new)\n              </Text>\n            </View>\n          )}\n        </View>\n      </Card>\n      \n      {modalOpen && (\n        <Card padding={6} style={{ \n          position: 'fixed',\n          top: '50%',\n          left: '50%',\n          transform: 'translate(-50%, -50%)',\n          zIndex: 1000,\n          boxShadow: '0 8px 32px rgba(0,0,0,0.2)'\n        }}>\n          <View gap={4}>\n            <Text variant=\"title-5\">Modal Dialog</Text>\n            <Text variant=\"body-3\">\n              This modal has its own hotkey context.\n            </Text>\n            <Text variant=\"body-3\" color=\"neutral-faded\">\n              Press Escape to close, or Ctrl+Enter to confirm.\n            </Text>\n            <View direction=\"row\" gap={2}>\n              <Button onClick={closeModal}>\n                Close\n              </Button>\n              <Button variant=\"outline\" onClick={closeModal}>\n                Cancel\n              </Button>\n            </View>\n          </View>\n        </Card>\n      )}\n      \n      <Card padding={4}>\n        <View gap={3}>\n          <Text variant=\"title-6\">Action Log</Text>\n          {logs.length === 0 ? (\n            <Text variant=\"body-3\" color=\"neutral-faded\">\n              No actions yet - try some hotkeys!\n            </Text>\n          ) : (\n            logs.map((log, index) => (\n              <Text key={index} variant=\"body-3\" style={{ fontFamily: 'monospace' }}>\n                {log}\n              </Text>\n            ))\n          )}\n        </View>\n      </Card>\n    </View>\n  );\n}\n```\n\n### Dynamic Hotkey Registration\n```typescript\nimport { useHotkeys, Text, View, Card, Button, TextField } from 'reshaped';\nimport { useState } from 'react';\n\ntype CustomHotkey = {\n  id: string;\n  name: string;\n  key: string;\n  ctrl: boolean;\n  shift: boolean;\n  alt: boolean;\n  action: string;\n};\n\nfunction DynamicHotkeys() {\n  const [customHotkeys, setCustomHotkeys] = useState<CustomHotkey[]>([\n    {\n      id: '1',\n      name: 'Quick Save',\n      key: 's',\n      ctrl: true,\n      shift: false,\n      alt: false,\n      action: 'save'\n    },\n    {\n      id: '2',\n      name: 'Quick Find',\n      key: 'f',\n      ctrl: true,\n      shift: false,\n      alt: false,\n      action: 'find'\n    }\n  ]);\n  \n  const [actionLog, setActionLog] = useState<string[]>([]);\n  const [newHotkey, setNewHotkey] = useState({\n    name: '',\n    key: '',\n    ctrl: false,\n    shift: false,\n    alt: false,\n    action: ''\n  });\n  \n  const addToLog = (action: string, hotkeyName: string) => {\n    const timestamp = new Date().toLocaleTimeString();\n    setActionLog(prev => [...prev.slice(-4), `${timestamp}: ${action} (${hotkeyName})`]);\n  };\n  \n  // Convert custom hotkeys to hook format\n  const hotkeyConfigs = customHotkeys.map(hotkey => ({\n    config: {\n      key: hotkey.key,\n      modifiers: {\n        ctrl: hotkey.ctrl,\n        shift: hotkey.shift,\n        alt: hotkey.alt\n      },\n      preventDefault: true\n    },\n    handler: () => addToLog(hotkey.action, hotkey.name)\n  }));\n  \n  const { registerHotkey, unregisterHotkey } = useHotkeys(hotkeyConfigs);\n  \n  const addCustomHotkey = () => {\n    if (newHotkey.name && newHotkey.key && newHotkey.action) {\n      const hotkey: CustomHotkey = {\n        id: Date.now().toString(),\n        ...newHotkey\n      };\n      \n      setCustomHotkeys(prev => [...prev, hotkey]);\n      \n      // Register the new hotkey\n      registerHotkey(\n        {\n          key: hotkey.key,\n          modifiers: {\n            ctrl: hotkey.ctrl,\n            shift: hotkey.shift,\n            alt: hotkey.alt\n          },\n          preventDefault: true\n        },\n        () => addToLog(hotkey.action, hotkey.name)\n      );\n      \n      // Reset form\n      setNewHotkey({\n        name: '',\n        key: '',\n        ctrl: false,\n        shift: false,\n        alt: false,\n        action: ''\n      });\n    }\n  };\n  \n  const removeHotkey = (hotkeyToRemove: CustomHotkey) => {\n    setCustomHotkeys(prev => prev.filter(h => h.id !== hotkeyToRemove.id));\n    \n    // Unregister the hotkey\n    unregisterHotkey({\n      key: hotkeyToRemove.key,\n      modifiers: {\n        ctrl: hotkeyToRemove.ctrl,\n        shift: hotkeyToRemove.shift,\n        alt: hotkeyToRemove.alt\n      }\n    });\n  };\n  \n  const formatHotkeyDisplay = (hotkey: CustomHotkey) => {\n    const modifiers = [];\n    if (hotkey.ctrl) modifiers.push('Ctrl');\n    if (hotkey.shift) modifiers.push('Shift');\n    if (hotkey.alt) modifiers.push('Alt');\n    \n    return [...modifiers, hotkey.key.toUpperCase()].join('+');\n  };\n  \n  return (\n    <View gap={6}>\n      <Card padding={6}>\n        <View gap={4}>\n          <Text variant=\"title-5\">Dynamic Hotkeys</Text>\n          \n          <Text variant=\"body-3\" color=\"neutral-faded\">\n            Create and manage custom hotkeys dynamically.\n          </Text>\n          \n          <View gap={3}>\n            <Text variant=\"title-6\">Current Hotkeys</Text>\n            {customHotkeys.map(hotkey => (\n              <View key={hotkey.id} direction=\"row\" justify=\"space-between\" align=\"center\">\n                <View gap={1}>\n                  <Text variant=\"body-2\" weight=\"medium\">{hotkey.name}</Text>\n                  <Text variant=\"body-3\" color=\"neutral-faded\">\n                    {formatHotkeyDisplay(hotkey)} → {hotkey.action}\n                  </Text>\n                </View>\n                <Button \n                  size=\"small\" \n                  variant=\"ghost\" \n                  color=\"critical\"\n                  onClick={() => removeHotkey(hotkey)}\n                >\n                  Remove\n                </Button>\n              </View>\n            ))}\n          </View>\n        </View>\n      </Card>\n      \n      <Card padding={6}>\n        <View gap={4}>\n          <Text variant=\"title-6\">Add New Hotkey</Text>\n          \n          <View gap={3}>\n            <TextField\n              value={newHotkey.name}\n              onChange={(name) => setNewHotkey(prev => ({ ...prev, name }))}\n              placeholder=\"Hotkey name (e.g., Quick Save)\"\n            />\n            \n            <View direction=\"row\" gap={3}>\n              <TextField\n                value={newHotkey.key}\n                onChange={(key) => setNewHotkey(prev => ({ ...prev, key }))}\n                placeholder=\"Key (e.g., s, f, Enter)\"\n                style={{ flex: 1 }}\n              />\n              \n              <label style={{ display: 'flex', alignItems: 'center', gap: '4px' }}>\n                <input\n                  type=\"checkbox\"\n                  checked={newHotkey.ctrl}\n                  onChange={(e) => setNewHotkey(prev => ({ ...prev, ctrl: e.target.checked }))}\n                />\n                <Text variant=\"body-3\">Ctrl</Text>\n              </label>\n              \n              <label style={{ display: 'flex', alignItems: 'center', gap: '4px' }}>\n                <input\n                  type=\"checkbox\"\n                  checked={newHotkey.shift}\n                  onChange={(e) => setNewHotkey(prev => ({ ...prev, shift: e.target.checked }))}\n                />\n                <Text variant=\"body-3\">Shift</Text>\n              </label>\n              \n              <label style={{ display: 'flex', alignItems: 'center', gap: '4px' }}>\n                <input\n                  type=\"checkbox\"\n                  checked={newHotkey.alt}\n                  onChange={(e) => setNewHotkey(prev => ({ ...prev, alt: e.target.checked }))}\n                />\n                <Text variant=\"body-3\">Alt</Text>\n              </label>\n            </View>\n            \n            <TextField\n              value={newHotkey.action}\n              onChange={(action) => setNewHotkey(prev => ({ ...prev, action }))}\n              placeholder=\"Action name (e.g., save, find, copy)\"\n            />\n            \n            <Button onClick={addCustomHotkey}>\n              Add Hotkey\n            </Button>\n          </View>\n        </View>\n      </Card>\n      \n      <Card padding={4}>\n        <View gap={3}>\n          <Text variant=\"title-6\">Action Log</Text>\n          {actionLog.length === 0 ? (\n            <Text variant=\"body-3\" color=\"neutral-faded\">\n              No hotkeys pressed yet\n            </Text>\n          ) : (\n            actionLog.map((log, index) => (\n              <Text key={index} variant=\"body-3\" style={{ fontFamily: 'monospace' }}>\n                {log}\n              </Text>\n            ))\n          )}\n        </View>\n      </Card>\n    </View>\n  );\n}\n```\n\n## Key Configuration Options\n\n### Modifier Keys\n- **ctrl**: Control key (Command on Mac)\n- **shift**: Shift key\n- **alt**: Alt key (Option on Mac)\n- **meta**: Meta key (Windows key on Windows, Cmd on Mac)\n\n### Event Handling\n- **preventDefault**: Prevents default browser behavior\n- **stopPropagation**: Stops event bubbling\n- **enabled**: Conditionally enable/disable hotkey\n- **context**: Context-specific hotkey activation\n\n## Cross-Platform Support\n- Automatic modifier key mapping (Ctrl/Cmd)\n- Platform-specific key name handling\n- Consistent behavior across browsers\n- Mobile device considerations\n\n## Best Practices\n- Use context-aware hotkeys for complex applications\n- Avoid conflicts with browser shortcuts\n- Provide visual indicators for available hotkeys\n- Allow users to customize hotkey bindings\n- Document hotkeys clearly in your interface\n\n## Related Components\n- **Hotkey**: Visual representation of keyboard shortcuts\n- **useKeyboardMode**: Keyboard navigation detection"