# useKeyboardMode Hook

## Overview
The useKeyboardMode hook detects when the user is navigating with keyboard input, enabling applications to provide enhanced focus indicators and keyboard-specific UI adaptations for improved accessibility.

## Key Features
- Automatic keyboard navigation detection
- Focus visibility optimization
- Tab navigation tracking
- Mouse/touch interaction detection
- Accessibility enhancement
- Performance optimized

## Hook Interface
```typescript
function useKeyboardMode(): {\n  isKeyboardMode: boolean;\n  enableKeyboardMode: () => void;\n  disableKeyboardMode: () => void;\n};\n```\n\n## Usage Examples\n\n### Enhanced Focus Indicators\n```typescript\nimport { useKeyboardMode, Text, View, Card, Button } from 'reshaped';\nimport { useState } from 'react';\n\nfunction EnhancedFocusDemo() {\n  const { isKeyboardMode } = useKeyboardMode();\n  const [focusedButton, setFocusedButton] = useState<number | null>(null);\n  \n  const buttons = [\n    { id: 1, label: 'Primary Action', variant: 'solid' as const },\n    { id: 2, label: 'Secondary Action', variant: 'outline' as const },\n    { id: 3, label: 'Tertiary Action', variant: 'ghost' as const }\n  ];\n  \n  return (\n    <Card padding={6}>\n      <View gap={4}>\n        <View gap={2}>\n          <Text variant=\"title-5\">Enhanced Focus Indicators</Text>\n          <Text variant=\"body-3\" color={isKeyboardMode ? 'primary' : 'neutral-faded'}>\n            Keyboard mode: {isKeyboardMode ? 'Active' : 'Inactive'}\n          </Text>\n          <Text variant=\"body-3\" color=\"neutral-faded\">\n            {isKeyboardMode \n              ? 'Use Tab/Shift+Tab to navigate, notice enhanced focus rings' \n              : 'Click with mouse or use keyboard to see the difference'\n            }\n          </Text>\n        </View>\n        \n        <View direction=\"row\" gap={3}>\n          {buttons.map(button => (\n            <Button\n              key={button.id}\n              variant={button.variant}\n              onFocus={() => setFocusedButton(button.id)}\n              onBlur={() => setFocusedButton(null)}\n              style={{\n                // Enhanced focus ring when in keyboard mode\n                outline: isKeyboardMode && focusedButton === button.id \n                  ? '3px solid var(--rs-color-border-primary)' \n                  : 'none',\n                outlineOffset: '2px',\n                // Hide default focus styles when not in keyboard mode\n                boxShadow: !isKeyboardMode ? 'none' : undefined\n              }}\n              onClick={() => {\n                console.log(`${button.label} clicked`);\n              }}\n            >\n              {button.label}\n            </Button>\n          ))}\n        </View>\n        \n        <View \n          padding={4}\n          style={{\n            backgroundColor: isKeyboardMode \n              ? 'var(--rs-color-background-primary-faded)' \n              : 'var(--rs-color-background-neutral-faded)',\n            borderRadius: '8px',\n            transition: 'background-color 0.2s ease'\n          }}\n        >\n          <Text variant=\"body-3\">\n            This area changes appearance based on keyboard navigation mode.\n            {isKeyboardMode && ' Enhanced accessibility mode is active!'}\n          </Text>\n        </View>\n      </View>\n    </Card>\n  );\n}\n```\n\n### Conditional Navigation Aids\n```typescript\nimport { useKeyboardMode, Text, View, Card, Button } from 'reshaped';\nimport { useState, useEffect } from 'react';\n\nfunction NavigationAids() {\n  const { isKeyboardMode } = useKeyboardMode();\n  const [currentSection, setCurrentSection] = useState(0);\n  const [showInstructions, setShowInstructions] = useState(false);\n  \n  const sections = [\n    { id: 'overview', title: 'Overview', content: 'This is the overview section with important information.' },\n    { id: 'features', title: 'Features', content: 'Here are the key features of our product.' },\n    { id: 'pricing', title: 'Pricing', content: 'Check out our affordable pricing plans.' },\n    { id: 'contact', title: 'Contact', content: 'Get in touch with our support team.' }\n  ];\n  \n  // Show instructions when keyboard mode is first detected\n  useEffect(() => {\n    if (isKeyboardMode) {\n      setShowInstructions(true);\n      const timer = setTimeout(() => setShowInstructions(false), 5000);\n      return () => clearTimeout(timer);\n    }\n  }, [isKeyboardMode]);\n  \n  return (\n    <View gap={4}>\n      {/* Keyboard navigation instructions - only show when in keyboard mode */}\n      {isKeyboardMode && showInstructions && (\n        <Card \n          padding={4}\n          style={{ \n            backgroundColor: 'var(--rs-color-background-warning-faded)',\n            border: '1px solid var(--rs-color-border-warning)'\n          }}\n        >\n          <View gap={2}>\n            <Text variant=\"body-2\" weight=\"medium\">\n              ‚å®Ô∏è Keyboard Navigation Active\n            </Text>\n            <Text variant=\"body-3\">\n              Use Arrow keys to navigate sections, Enter to select, \n              or Tab to jump between interactive elements.\n            </Text>\n          </View>\n        </Card>\n      )}\n      \n      <Card padding={6}>\n        <View gap={4}>\n          <Text variant=\"title-5\">Navigation Demo</Text>\n          \n          <View direction=\"row\" gap={2}>\n            {sections.map((section, index) => (\n              <Button\n                key={section.id}\n                size=\"small\"\n                variant={currentSection === index ? 'solid' : 'outline'}\n                onClick={() => setCurrentSection(index)}\n                onKeyDown={(e) => {\n                  // Enhanced keyboard navigation\n                  if (isKeyboardMode) {\n                    switch (e.key) {\n                      case 'ArrowRight':\n                        e.preventDefault();\n                        setCurrentSection((prev) => \n                          prev < sections.length - 1 ? prev + 1 : 0\n                        );\n                        break;\n                      case 'ArrowLeft':\n                        e.preventDefault();\n                        setCurrentSection((prev) => \n                          prev > 0 ? prev - 1 : sections.length - 1\n                        );\n                        break;\n                    }\n                  }\n                }}\n                style={{\n                  // Enhanced visual feedback for keyboard users\n                  transform: isKeyboardMode && currentSection === index \n                    ? 'translateY(-2px)' \n                    : 'none',\n                  boxShadow: isKeyboardMode && currentSection === index \n                    ? '0 4px 8px rgba(0,0,0,0.1)' \n                    : 'none',\n                  transition: 'all 0.2s ease'\n                }}\n              >\n                {section.title}\n              </Button>\n            ))}\n          </View>\n          \n          <View \n            padding={5}\n            style={{\n              backgroundColor: 'var(--rs-color-background-elevation-base)',\n              borderRadius: '8px',\n              minHeight: '120px'\n            }}\n          >\n            <View gap={3}>\n              <Text variant=\"title-6\">\n                {sections[currentSection].title}\n              </Text>\n              <Text variant=\"body-3\">\n                {sections[currentSection].content}\n              </Text>\n              \n              {isKeyboardMode && (\n                <Text variant=\"caption\" color=\"neutral-faded\">\n                  üí° Use left/right arrow keys to navigate sections\n                </Text>\n              )}\n            </View>\n          </View>\n        </View>\n      </Card>\n    </View>\n  );\n}\n```\n\n### Accessible Form with Keyboard Enhancements\n```typescript\nimport { useKeyboardMode, Text, View, Card, Button, TextField, TextArea } from 'reshaped';\nimport { useState, useRef } from 'react';\n\nfunction AccessibleForm() {\n  const { isKeyboardMode, enableKeyboardMode } = useKeyboardMode();\n  const [formData, setFormData] = useState({\n    name: '',\n    email: '',\n    subject: '',\n    message: ''\n  });\n  const [errors, setErrors] = useState<Record<string, string>>({});\n  const [showValidation, setShowValidation] = useState(false);\n  const formRef = useRef<HTMLDivElement>(null);\n  \n  const validateForm = () => {\n    const newErrors: Record<string, string> = {};\n    \n    if (!formData.name.trim()) newErrors.name = 'Name is required';\n    if (!formData.email.trim()) newErrors.email = 'Email is required';\n    else if (!/\\S+@\\S+\\.\\S+/.test(formData.email)) newErrors.email = 'Email is invalid';\n    if (!formData.message.trim()) newErrors.message = 'Message is required';\n    \n    setErrors(newErrors);\n    setShowValidation(true);\n    \n    return Object.keys(newErrors).length === 0;\n  };\n  \n  const handleSubmit = () => {\n    if (validateForm()) {\n      alert('Form submitted successfully!');\n      // Reset form\n      setFormData({ name: '', email: '', subject: '', message: '' });\n      setErrors({});\n      setShowValidation(false);\n    } else if (isKeyboardMode) {\n      // Focus first error field for keyboard users\n      const firstErrorField = Object.keys(errors)[0];\n      const errorElement = formRef.current?.querySelector(\n        `[name=\"${firstErrorField}\"]`\n      ) as HTMLElement;\n      errorElement?.focus();\n    }\n  };\n  \n  return (\n    <Card padding={6} ref={formRef}>\n      <View gap={6}>\n        <View gap={2}>\n          <Text variant=\"title-5\">Contact Form</Text>\n          <Text variant=\"body-3\" color=\"neutral-faded\">\n            Enhanced for keyboard accessibility\n            {isKeyboardMode && ' - Keyboard mode active ‚å®Ô∏è'}\n          </Text>\n        </View>\n        \n        {/* Keyboard mode indicator */}\n        {!isKeyboardMode && (\n          <View \n            padding={3}\n            style={{\n              backgroundColor: 'var(--rs-color-background-neutral-faded)',\n              borderRadius: '6px'\n            }}\n          >\n            <Text variant=\"body-3\">\n              üí° Try navigating with Tab key for enhanced keyboard experience\n              <Button \n                size=\"small\" \n                variant=\"ghost\"\n                onClick={enableKeyboardMode}\n                style={{ marginLeft: '8px' }}\n              >\n                Enable\n              </Button>\n            </Text>\n          </View>\n        )}\n        \n        <View gap={4}>\n          <View gap={2}>\n            <label htmlFor=\"name\">\n              <Text variant=\"body-2\" weight=\"medium\">\n                Name {isKeyboardMode && '*'}\n              </Text>\n            </label>\n            <TextField\n              id=\"name\"\n              name=\"name\"\n              value={formData.name}\n              onChange={(name) => {\n                setFormData(prev => ({ ...prev, name }));\n                if (errors.name) {\n                  setErrors(prev => ({ ...prev, name: '' }));\n                }\n              }}\n              style={{\n                borderColor: showValidation && errors.name \n                  ? 'var(--rs-color-border-critical)' \n                  : undefined,\n                // Enhanced focus ring for keyboard users\n                outline: isKeyboardMode \n                  ? '2px solid transparent' \n                  : 'none'\n              }}\n            />\n            {showValidation && errors.name && (\n              <Text variant=\"body-3\" color=\"critical\">\n                {errors.name}\n              </Text>\n            )}\n          </View>\n          \n          <View gap={2}>\n            <label htmlFor=\"email\">\n              <Text variant=\"body-2\" weight=\"medium\">\n                Email {isKeyboardMode && '*'}\n              </Text>\n            </label>\n            <TextField\n              id=\"email\"\n              name=\"email\"\n              type=\"email\"\n              value={formData.email}\n              onChange={(email) => {\n                setFormData(prev => ({ ...prev, email }));\n                if (errors.email) {\n                  setErrors(prev => ({ ...prev, email: '' }));\n                }\n              }}\n              style={{\n                borderColor: showValidation && errors.email \n                  ? 'var(--rs-color-border-critical)' \n                  : undefined\n              }}\n            />\n            {showValidation && errors.email && (\n              <Text variant=\"body-3\" color=\"critical\">\n                {errors.email}\n              </Text>\n            )}\n          </View>\n          \n          <View gap={2}>\n            <label htmlFor=\"subject\">\n              <Text variant=\"body-2\" weight=\"medium\">Subject</Text>\n            </label>\n            <TextField\n              id=\"subject\"\n              name=\"subject\"\n              value={formData.subject}\n              onChange={(subject) => setFormData(prev => ({ ...prev, subject }))}\n            />\n          </View>\n          \n          <View gap={2}>\n            <label htmlFor=\"message\">\n              <Text variant=\"body-2\" weight=\"medium\">\n                Message {isKeyboardMode && '*'}\n              </Text>\n            </label>\n            <TextArea\n              id=\"message\"\n              name=\"message\"\n              value={formData.message}\n              onChange={(message) => {\n                setFormData(prev => ({ ...prev, message }));\n                if (errors.message) {\n                  setErrors(prev => ({ ...prev, message: '' }));\n                }\n              }}\n              rows={4}\n              style={{\n                borderColor: showValidation && errors.message \n                  ? 'var(--rs-color-border-critical)' \n                  : undefined\n              }}\n            />\n            {showValidation && errors.message && (\n              <Text variant=\"body-3\" color=\"critical\">\n                {errors.message}\n              </Text>\n            )}\n          </View>\n        </View>\n        \n        <View direction=\"row\" justify=\"space-between\" align=\"center\">\n          <Button \n            variant=\"outline\" \n            onClick={() => {\n              setFormData({ name: '', email: '', subject: '', message: '' });\n              setErrors({});\n              setShowValidation(false);\n            }}\n          >\n            Reset\n          </Button>\n          \n          <Button \n            onClick={handleSubmit}\n            style={{\n              // Enhanced submit button for keyboard users\n              transform: isKeyboardMode ? 'scale(1.02)' : 'none',\n              transition: 'transform 0.2s ease'\n            }}\n          >\n            {isKeyboardMode ? '‚å®Ô∏è Submit Form' : 'Submit'}\n          </Button>\n        </View>\n        \n        {isKeyboardMode && (\n          <Text variant=\"body-3\" color=\"neutral-faded\">\n            üí° Press Tab to navigate fields, Shift+Tab to go back, \n            Enter on Submit button to send form\n          </Text>\n        )}\n      </View>\n    </Card>\n  );\n}\n```\n\n### Manual Mode Control\n```typescript\nimport { useKeyboardMode, Text, View, Card, Button } from 'reshaped';\nimport { useState } from 'react';\n\nfunction ManualModeControl() {\n  const { isKeyboardMode, enableKeyboardMode, disableKeyboardMode } = useKeyboardMode();\n  const [clickCount, setClickCount] = useState(0);\n  \n  return (\n    <Card padding={6}>\n      <View gap={4}>\n        <Text variant=\"title-5\">Manual Keyboard Mode Control</Text>\n        \n        <View \n          padding={4}\n          style={{\n            backgroundColor: isKeyboardMode \n              ? 'var(--rs-color-background-positive-faded)' \n              : 'var(--rs-color-background-neutral-faded)',\n            borderRadius: '8px',\n            border: `2px solid ${isKeyboardMode \n              ? 'var(--rs-color-border-positive)' \n              : 'var(--rs-color-border-neutral-faded)'\n            }`,\n            transition: 'all 0.3s ease'\n          }}\n        >\n          <View gap={3}>\n            <Text variant=\"body-2\">\n              Current mode: <Text as=\"span\" weight=\"bold\">\n                {isKeyboardMode ? 'Keyboard' : 'Mouse/Touch'}\n              </Text>\n            </Text>\n            \n            <Text variant=\"body-3\">\n              {isKeyboardMode \n                ? '‚å®Ô∏è Keyboard navigation is active. Focus indicators are enhanced.' \n                : 'üñ±Ô∏è Mouse/touch mode. Focus indicators are minimal.'\n              }\n            </Text>\n          </View>\n        </View>\n        \n        <View direction=\"row\" gap={3}>\n          <Button \n            onClick={() => {\n              enableKeyboardMode();\n              setClickCount(prev => prev + 1);\n            }}\n            variant={isKeyboardMode ? 'solid' : 'outline'}\n            style={{\n              outline: isKeyboardMode ? '2px solid var(--rs-color-border-primary)' : 'none',\n              outlineOffset: '2px'\n            }}\n          >\n            Enable Keyboard Mode\n          </Button>\n          \n          <Button \n            onClick={() => {\n              disableKeyboardMode();\n              setClickCount(prev => prev + 1);\n            }}\n            variant={!isKeyboardMode ? 'solid' : 'outline'}\n          >\n            Enable Mouse Mode\n          </Button>\n        </View>\n        \n        <View gap={2}>\n          <Text variant=\"body-3\">\n            Buttons clicked: {clickCount}\n          </Text>\n          \n          <Text variant=\"body-3\" color=\"neutral-faded\">\n            Notice how focus styles change based on the current input mode. \n            This helps provide the right level of visual feedback for different interaction methods.\n          </Text>\n        </View>\n        \n        {/* Example interactive elements */}\n        <View gap={2}>\n          <Text variant=\"title-6\">Test Elements:</Text>\n          <View direction=\"row\" gap={2}>\n            <button\n              style={{\n                padding: '8px 16px',\n                border: '1px solid var(--rs-color-border-neutral-faded)',\n                borderRadius: '6px',\n                backgroundColor: 'var(--rs-color-background-elevation-base)',\n                cursor: 'pointer',\n                outline: isKeyboardMode ? '2px solid transparent' : 'none',\n                transition: 'all 0.2s ease'\n              }}\n              onFocus={(e) => {\n                if (isKeyboardMode) {\n                  e.target.style.outline = '2px solid var(--rs-color-border-primary)';\n                }\n              }}\n              onBlur={(e) => {\n                e.target.style.outline = 'none';\n              }}\n            >\n              Test Button 1\n            </button>\n            \n            <button\n              style={{\n                padding: '8px 16px',\n                border: '1px solid var(--rs-color-border-neutral-faded)',\n                borderRadius: '6px',\n                backgroundColor: 'var(--rs-color-background-elevation-base)',\n                cursor: 'pointer',\n                outline: isKeyboardMode ? '2px solid transparent' : 'none',\n                transition: 'all 0.2s ease'\n              }}\n              onFocus={(e) => {\n                if (isKeyboardMode) {\n                  e.target.style.outline = '2px solid var(--rs-color-border-primary)';\n                }\n              }}\n              onBlur={(e) => {\n                e.target.style.outline = 'none';\n              }}\n            >\n              Test Button 2\n            </button>\n          </View>\n        </View>\n      </View>\n    </Card>\n  );\n}\n```\n\n## Detection Logic\n\n### Automatic Detection\n- **Tab key press**: Enables keyboard mode\n- **Mouse click**: Disables keyboard mode\n- **Touch events**: Disables keyboard mode\n- **Arrow key navigation**: Maintains keyboard mode\n\n### Manual Override\n- **enableKeyboardMode()**: Force enable keyboard mode\n- **disableKeyboardMode()**: Force disable keyboard mode\n- Useful for testing or specific UX requirements\n\n## Accessibility Benefits\n\n### Enhanced Focus Visibility\n- Prominent focus rings for keyboard users\n- Minimal focus styling for mouse users\n- Reduced visual noise when not needed\n- Better compliance with accessibility standards\n\n### Context-Aware UI\n- Show keyboard shortcuts only when relevant\n- Enhanced navigation hints for keyboard users\n- Optimized interaction patterns\n- Better user experience for all input methods\n\n## Performance Considerations\n- Lightweight event listeners\n- Efficient state management\n- No unnecessary re-renders\n- Minimal DOM queries\n\n## Best Practices\n- Use for conditional focus styling\n- Show keyboard hints only when needed\n- Provide manual override options\n- Test with actual keyboard navigation\n- Consider both keyboard and screen reader users\n\n## Related Hooks\n- **useHotkeys**: Keyboard shortcut management\n- **useOnClickOutside**: Click detection utilities"