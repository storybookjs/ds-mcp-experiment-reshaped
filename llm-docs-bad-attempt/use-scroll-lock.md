# useScrollLock Hook

## Overview
The useScrollLock hook locks body scroll, typically used with modals, overlays, and off-canvas menus to prevent background scrolling while maintaining focus within the active component.

## Key Features
- Background scroll prevention
- Focus containment support
- Scroll position preservation
- Touch device compatibility
- Multiple lock instance handling
- Performance optimized

## Hook Interface
```typescript
function useScrollLock(enabled: boolean): void;\n```\n\n## Usage Examples\n\n### Modal with Scroll Lock\n```typescript\nimport { useScrollLock, Button, Text, View, Card } from 'reshaped';\nimport { useState, useEffect } from 'react';\n\nfunction ModalWithScrollLock() {\n  const [isOpen, setIsOpen] = useState(false);\n  const [content] = useState(\n    Array.from({ length: 50 }, (_, i) => `Background content line ${i + 1}`)\n  );\n  \n  // Lock scroll when modal is open\n  useScrollLock(isOpen);\n  \n  // Close modal on escape key\n  useEffect(() => {\n    if (!isOpen) return;\n    \n    const handleEscape = (event: KeyboardEvent) => {\n      if (event.key === 'Escape') {\n        setIsOpen(false);\n      }\n    };\n    \n    document.addEventListener('keydown', handleEscape);\n    return () => document.removeEventListener('keydown', handleEscape);\n  }, [isOpen]);\n  \n  return (\n    <View gap={4}>\n      {/* Background content that should not scroll when modal is open */}\n      <Card padding={6}>\n        <View gap={4}>\n          <Text variant=\"title-4\">Background Content</Text>\n          <Text variant=\"body-3\" color=\"neutral-faded\">\n            This page has scrollable content. When the modal opens, \n            background scrolling will be locked.\n          </Text>\n        </View>\n      </Card>\n      \n      <Card padding={4}>\n        <View gap={3}>\n          {content.map((line, index) => (\n            <Text key={index} variant=\"body-3\">\n              {line}\n            </Text>\n          ))}\n        </View>\n      </Card>\n      \n      <View align=\"center\" padding={4}>\n        <Button onClick={() => setIsOpen(true)}>\n          Open Modal\n        </Button>\n      </View>\n      \n      {/* Modal overlay */}\n      {isOpen && (\n        <div\n          style={{\n            position: 'fixed',\n            top: 0,\n            left: 0,\n            right: 0,\n            bottom: 0,\n            backgroundColor: 'rgba(0, 0, 0, 0.6)',\n            display: 'flex',\n            alignItems: 'center',\n            justifyContent: 'center',\n            zIndex: 1000\n          }}\n          onClick={(e) => {\n            if (e.target === e.currentTarget) {\n              setIsOpen(false);\n            }\n          }}\n        >\n          <Card \n            padding={6}\n            style={{ \n              maxWidth: '500px',\n              width: '90%',\n              maxHeight: '80vh',\n              overflow: 'auto'\n            }}\n          >\n            <View gap={4}>\n              <View direction=\"row\" justify=\"space-between\" align=\"center\">\n                <Text variant=\"title-4\">Modal Title</Text>\n                <Button \n                  variant=\"ghost\" \n                  size=\"small\"\n                  onClick={() => setIsOpen(false)}\n                >\n                  âœ•\n                </Button>\n              </View>\n              \n              <View gap={3}>\n                <Text variant=\"body-2\">\n                  This modal prevents background scrolling using useScrollLock.\n                  Try scrolling - the background content won't move.\n                </Text>\n                \n                <Text variant=\"body-3\" color=\"neutral-faded\">\n                  The modal itself can still be scrolled if the content overflows.\n                  Background scroll will be restored when the modal closes.\n                </Text>\n                \n                {/* Scrollable content within modal */}\n                {Array.from({ length: 20 }, (_, i) => (\n                  <Text key={i} variant=\"body-3\">\n                    Modal content line {i + 1} - this content can scroll within the modal.\n                  </Text>\n                ))}\n              </View>\n              \n              <View direction=\"row\" gap={2} justify=\"flex-end\">\n                <Button \n                  variant=\"outline\" \n                  onClick={() => setIsOpen(false)}\n                >\n                  Cancel\n                </Button>\n                <Button onClick={() => setIsOpen(false)}>\n                  Confirm\n                </Button>\n              </View>\n            </View>\n          </Card>\n        </div>\n      )}\n    </View>\n  );\n}\n```\n\n### Sidebar Navigation\n```typescript\nimport { useScrollLock, Button, Text, View, Card } from 'reshaped';\nimport { useState } from 'react';\n\nfunction SidebarNavigation() {\n  const [sidebarOpen, setSidebarOpen] = useState(false);\n  const [selectedItem, setSelectedItem] = useState('home');\n  \n  // Lock scroll when sidebar is open on mobile\n  useScrollLock(sidebarOpen);\n  \n  const navigationItems = [\n    { id: 'home', label: 'Home', description: 'Dashboard and overview' },\n    { id: 'products', label: 'Products', description: 'Browse product catalog' },\n    { id: 'orders', label: 'Orders', description: 'View order history' },\n    { id: 'customers', label: 'Customers', description: 'Customer management' },\n    { id: 'analytics', label: 'Analytics', description: 'Reports and insights' },\n    { id: 'settings', label: 'Settings', description: 'Account preferences' }\n  ];\n  \n  const content = Array.from({ length: 30 }, (_, i) => \n    `Main content paragraph ${i + 1}. This represents the main page content that should not scroll when the sidebar is open on mobile devices.`\n  );\n  \n  return (\n    <View>\n      {/* Header */}\n      <Card \n        padding={4}\n        style={{\n          position: 'sticky',\n          top: 0,\n          zIndex: 100,\n          borderBottom: '1px solid var(--rs-color-border-neutral-faded)'\n        }}\n      >\n        <View direction=\"row\" justify=\"space-between\" align=\"center\">\n          <Button \n            variant=\"ghost\" \n            size=\"small\"\n            onClick={() => setSidebarOpen(!sidebarOpen)}\n          >\n            â˜° Menu\n          </Button>\n          <Text variant=\"title-5\">Dashboard</Text>\n          <View style={{ width: '32px' }} /> {/* Spacer for alignment */}\n        </View>\n      </Card>\n      \n      <View direction=\"row\">\n        {/* Sidebar Overlay */}\n        {sidebarOpen && (\n          <div\n            style={{\n              position: 'fixed',\n              top: 0,\n              left: 0,\n              right: 0,\n              bottom: 0,\n              backgroundColor: 'rgba(0, 0, 0, 0.5)',\n              zIndex: 999\n            }}\n            onClick={() => setSidebarOpen(false)}\n          />\n        )}\n        \n        {/* Sidebar */}\n        <div\n          style={{\n            position: 'fixed',\n            top: 0,\n            left: sidebarOpen ? 0 : '-300px',\n            width: '300px',\n            height: '100vh',\n            backgroundColor: 'var(--rs-color-background-elevation-base)',\n            borderRight: '1px solid var(--rs-color-border-neutral-faded)',\n            transition: 'left 0.3s ease',\n            zIndex: 1000,\n            overflow: 'auto'\n          }}\n        >\n          <Card padding={4}>\n            <View gap={4}>\n              <View direction=\"row\" justify=\"space-between\" align=\"center\">\n                <Text variant=\"title-6\">Navigation</Text>\n                <Button \n                  variant=\"ghost\" \n                  size=\"small\"\n                  onClick={() => setSidebarOpen(false)}\n                >\n                  âœ•\n                </Button>\n              </View>\n              \n              <View gap={1}>\n                {navigationItems.map(item => (\n                  <Button\n                    key={item.id}\n                    variant={selectedItem === item.id ? 'solid' : 'ghost'}\n                    onClick={() => {\n                      setSelectedItem(item.id);\n                      setSidebarOpen(false);\n                    }}\n                    style={{\n                      width: '100%',\n                      justifyContent: 'flex-start',\n                      textAlign: 'left'\n                    }}\n                  >\n                    <View gap={1}>\n                      <Text variant=\"body-2\">{item.label}</Text>\n                      <Text variant=\"body-3\" color=\"neutral-faded\">\n                        {item.description}\n                      </Text>\n                    </View>\n                  </Button>\n                ))}\n              </View>\n            </View>\n          </Card>\n        </div>\n        \n        {/* Main Content */}\n        <View grow padding={6}>\n          <View gap={4}>\n            <Text variant=\"title-4\">\n              {navigationItems.find(item => item.id === selectedItem)?.label}\n            </Text>\n            \n            <Text variant=\"body-3\" color=\"warning\">\n              ðŸ’¡ Open the sidebar and try scrolling - background scroll is locked!\n            </Text>\n            \n            {content.map((paragraph, index) => (\n              <Text key={index} variant=\"body-3\">\n                {paragraph}\n              </Text>\n            ))}\n          </View>\n        </View>\n      </View>\n    </View>\n  );\n}\n```\n\n### Multiple Scroll Locks\n```typescript\nimport { useScrollLock, Button, Text, View, Card } from 'reshaped';\nimport { useState } from 'react';\n\nfunction MultipleScrollLocks() {\n  const [modal1Open, setModal1Open] = useState(false);\n  const [modal2Open, setModal2Open] = useState(false);\n  const [tooltipOpen, setTooltipOpen] = useState(false);\n  \n  // Each component manages its own scroll lock\n  useScrollLock(modal1Open);\n  useScrollLock(modal2Open);\n  useScrollLock(tooltipOpen);\n  \n  const backgroundContent = Array.from({ length: 40 }, (_, i) => \n    `Background content line ${i + 1}. This should not scroll when any modal or tooltip is open.`\n  );\n  \n  return (\n    <View gap={4}>\n      <Card padding={6}>\n        <View gap={4}>\n          <Text variant=\"title-4\">Multiple Scroll Lock Demo</Text>\n          \n          <Text variant=\"body-3\" color=\"neutral-faded\">\n            This demo shows how multiple components can each use useScrollLock. \n            The scroll lock is active as long as any component needs it.\n          </Text>\n          \n          <View direction=\"row\" gap={3}>\n            <Button onClick={() => setModal1Open(true)}>\n              Open Modal 1\n            </Button>\n            <Button onClick={() => setModal2Open(true)}>\n              Open Modal 2\n            </Button>\n            <Button onClick={() => setTooltipOpen(true)}>\n              Show Tooltip\n            </Button>\n          </View>\n          \n          <Text variant=\"body-3\" color=\"neutral-faded\">\n            Active locks: {\n              [modal1Open && 'Modal 1', modal2Open && 'Modal 2', tooltipOpen && 'Tooltip']\n                .filter(Boolean)\n                .join(', ') || 'None'\n            }\n          </Text>\n        </View>\n      </Card>\n      \n      {/* Background content */}\n      <Card padding={4}>\n        <View gap={3}>\n          {backgroundContent.map((line, index) => (\n            <Text key={index} variant=\"body-3\">\n              {line}\n            </Text>\n          ))}\n        </View>\n      </Card>\n      \n      {/* Modal 1 */}\n      {modal1Open && (\n        <div\n          style={{\n            position: 'fixed',\n            top: 0,\n            left: 0,\n            right: 0,\n            bottom: 0,\n            backgroundColor: 'rgba(255, 0, 0, 0.3)', // Red tint\n            display: 'flex',\n            alignItems: 'center',\n            justifyContent: 'center',\n            zIndex: 1000\n          }}\n          onClick={(e) => e.target === e.currentTarget && setModal1Open(false)}\n        >\n          <Card padding={6} style={{ maxWidth: '400px' }}>\n            <View gap={4}>\n              <Text variant=\"title-5\">Modal 1</Text>\n              <Text variant=\"body-3\">\n                This is modal 1. Notice the red tint in the background. \n                You can open modal 2 from here to stack modals.\n              </Text>\n              <View direction=\"row\" gap={2}>\n                <Button size=\"small\" onClick={() => setModal2Open(true)}>\n                  Open Modal 2\n                </Button>\n                <Button variant=\"outline\" onClick={() => setModal1Open(false)}>\n                  Close\n                </Button>\n              </View>\n            </View>\n          </Card>\n        </div>\n      )}\n      \n      {/* Modal 2 */}\n      {modal2Open && (\n        <div\n          style={{\n            position: 'fixed',\n            top: 0,\n            left: 0,\n            right: 0,\n            bottom: 0,\n            backgroundColor: 'rgba(0, 0, 255, 0.3)', // Blue tint\n            display: 'flex',\n            alignItems: 'center',\n            justifyContent: 'center',\n            zIndex: 1100 // Higher than modal 1\n          }}\n          onClick={(e) => e.target === e.currentTarget && setModal2Open(false)}\n        >\n          <Card padding={6} style={{ maxWidth: '400px' }}>\n            <View gap={4}>\n              <Text variant=\"title-5\">Modal 2</Text>\n              <Text variant=\"body-3\">\n                This is modal 2 with a blue tint. It has a higher z-index \n                and appears on top of modal 1 if both are open.\n              </Text>\n              <Button onClick={() => setModal2Open(false)}>\n                Close Modal 2\n              </Button>\n            </View>\n          </Card>\n        </div>\n      )}\n      \n      {/* Tooltip */}\n      {tooltipOpen && (\n        <div\n          style={{\n            position: 'fixed',\n            top: '20px',\n            right: '20px',\n            zIndex: 1200,\n            backgroundColor: 'var(--rs-color-background-neutral)',\n            color: 'var(--rs-color-foreground-neutral-contrast)',\n            padding: '12px',\n            borderRadius: '8px',\n            boxShadow: '0 4px 12px rgba(0,0,0,0.2)',\n            maxWidth: '300px'\n          }}\n        >\n          <View gap={2}>\n            <Text variant=\"body-3\">This tooltip also locks scroll!</Text>\n            <Button \n              size=\"small\" \n              variant=\"ghost\"\n              onClick={() => setTooltipOpen(false)}\n            >\n              âœ• Close\n            </Button>\n          </View>\n        </div>\n      )}\n    </View>\n  );\n}\n```\n\n## Implementation Details\n\n### Scroll Position Preservation\n- Saves current scroll position before locking\n- Restores position when all locks are removed\n- Prevents layout shifts during lock/unlock\n\n### Multiple Lock Support\n- Reference counting for multiple instances\n- Only unlocks when all components are unmounted\n- Efficient event listener management\n\n### Touch Device Support\n- Prevents touch-based scrolling\n- Handles iOS Safari bounce behavior\n- Maintains focus within locked container\n\n## Platform Considerations\n\n### iOS Safari\n- Handles viewport changes on scroll\n - Prevents rubber band scrolling\n- Maintains fixed positioning\n\n### Android Browsers\n- Touch event handling\n- Keyboard viewport adjustments\n- Hardware back button integration\n\n## Accessibility\n- Maintains focus within locked container\n- Screen reader navigation preservation\n- Keyboard interaction support\n- ARIA live region announcements\n\n## Performance\n- Lightweight implementation\n- Efficient event delegation\n- Minimal DOM manipulation\n- Memory leak prevention\n\n## Best Practices\n- Use with modal and overlay components\n- Combine with focus management\n- Provide escape mechanisms (ESC key, click outside)\n- Test on mobile devices\n- Consider reduced motion preferences\n\n## Related Hooks\n- **useOnClickOutside**: Click outside detection\n- **useHotkeys**: Keyboard shortcut handling\n- **useIsomorphicLayoutEffect**: Layout effects for scroll management"